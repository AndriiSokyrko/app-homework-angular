"use strict";(self.webpackChunkhw_angular=self.webpackChunkhw_angular||[]).push([[35],{7035:(O,m,s)=>{s.r(m),s.d(m,{RegistrationModule:()=>q});var a=s(7013),i=s(433),c=s(9978),p=s(484),u=s(5609),f=s(1133),e=s(8256),v=s(1228),h=s(9912),R=s(6895),w=s(5085);function C(o,n){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.message)}}function Z(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Login is required. "),e.qZA())}function x(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Login must be at least 4 characters long. "),e.qZA())}function _(o,n){if(1&o&&(e.TgZ(0,"div",11),e.YNc(1,Z,2,0,"div",1),e.YNc(2,x,2,0,"div",1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.formRegister.controls.login.errors?null:t.formRegister.controls.login.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formRegister.controls.login.errors?null:t.formRegister.controls.login.errors.minlength)}}function T(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Email is required. "),e.qZA())}function I(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Field must be email type. "),e.qZA())}function b(o,n){if(1&o&&(e.TgZ(0,"div",11),e.YNc(1,T,2,0,"div",1),e.YNc(2,I,2,0,"div",1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.formRegister.controls.email.errors?null:t.formRegister.controls.email.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formRegister.controls.email.errors?null:t.formRegister.controls.email.errors.email)}}function y(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Password is required. "),e.qZA())}function A(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Password must be at least 4 chars. "),e.qZA())}function J(o,n){if(1&o&&(e.TgZ(0,"div",11),e.YNc(1,y,2,0,"div",1),e.YNc(2,A,2,0,"div",1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.formRegister.controls.password.errors?null:t.formRegister.controls.password.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formRegister.controls.password.errors?null:t.formRegister.controls.password.errors.minlength)}}const N=function(o){return{background:o}},U=[{path:"",component:(()=>{class o{constructor(t,r,g,l){this.authService=t,this.router=r,this.ref=g,this.store=l,this.message="",this.selectedColor=JSON.parse(localStorage.getItem("selectedColor")),this.formRegister=new i.cw({login:new i.NI("",[i.kI.required,i.kI.minLength(4)]),email:new i.NI("",[i.kI.required,i.kI.email]),password:new i.NI("",[i.kI.required,i.kI.minLength(4)])})}ngOnInit(){this.store.select(c.L).subscribe(t=>{this.selectedColor=t})}newUser(){return{name:this.formRegister.controls.login.value,email:this.formRegister.controls.email.value,password:this.formRegister.controls.password.value}}onSubmit(){const t=this.newUser();this.store.select(p.R).subscribe(r=>{if(void 0!==r){if(r.filter(l=>l.name===this.formRegister.controls.login.value).length)return this.ref.markForCheck(),this.message="The name is already registered",void setTimeout(()=>{this.message=null,this.ref.markForCheck()},1e3);{const l=f.hashSync(this.formRegister.controls.password.value,10);this.authService.addUser({...t,password:l}).subscribe(d=>{this.store.dispatch((0,u.c)({...d,password:d.password})),localStorage.setItem("login",d.id.toString()),this.router.navigate(["/dashboard"])})}}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.e),e.Y36(a.F0),e.Y36(e.sBO),e.Y36(h.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-registration"]],decls:22,vars:10,consts:[[1,"form-wrapper",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"input-wrapper"],["for","login"],["id","login_id","type","text","formControlName","login"],["class","invalid",4,"ngIf"],["for","Email"],["id","email_id","type","text","formControlName","email"],["for","password"],["id","password_id","type","password","formControlName","password"],["type","submit",3,"disabled"],[1,"invalid"]],template:function(t,r){1&t&&(e.TgZ(0,"app-modal")(1,"form",0),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.YNc(2,C,2,1,"p",1),e.TgZ(3,"h1"),e._uU(4,"Registration"),e.qZA(),e.TgZ(5,"div",2)(6,"label",3),e._uU(7,"Login: "),e.qZA(),e._UZ(8,"input",4),e.YNc(9,_,3,2,"div",5),e.qZA(),e.TgZ(10,"div",2)(11,"label",6),e._uU(12,"Email: "),e.qZA(),e._UZ(13,"input",7),e.YNc(14,b,3,2,"div",5),e.qZA(),e.TgZ(15,"div",2)(16,"label",8),e._uU(17,"Password: "),e.qZA(),e._UZ(18,"input",9),e.YNc(19,J,3,2,"div",5),e.qZA(),e.TgZ(20,"button",10),e._uU(21,"Submit"),e.qZA()()()),2&t&&(e.xp6(1),e.Akn(e.VKq(8,N,r.selectedColor[1])),e.Q6J("formGroup",r.formRegister),e.xp6(1),e.Q6J("ngIf",r.message),e.xp6(7),e.Q6J("ngIf",r.formRegister.controls.login.invalid&&(r.formRegister.controls.login.dirty||r.formRegister.controls.login.touched)),e.xp6(5),e.Q6J("ngIf",r.formRegister.controls.email.invalid&&(r.formRegister.controls.email.dirty||r.formRegister.controls.email.touched)),e.xp6(5),e.Q6J("ngIf",r.formRegister.controls.password.invalid&&(r.formRegister.controls.password.dirty||r.formRegister.controls.password.touched)),e.xp6(1),e.Q6J("disabled",!r.formRegister.valid))},dependencies:[R.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,w.z],styles:[".form-wrapper[_ngcontent-%COMP%]{padding:75px;width:600px;display:flex;flex-direction:column;align-items:center;margin:0 auto;background:#D9D9D9;border-radius:10px}.form-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:250px;margin-bottom:15px}.form-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px}.valid[_ngcontent-%COMP%]{color:green;border:1px solid green}.invalid[_ngcontent-%COMP%]{color:red;border:1px solid red}"],changeDetection:0}),o})()}];let q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[a.Bz.forChild(U),a.Bz]}),o})()}}]);