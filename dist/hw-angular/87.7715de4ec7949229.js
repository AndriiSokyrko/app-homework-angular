"use strict";(self.webpackChunkhw_angular=self.webpackChunkhw_angular||[]).push([[87],{1087:(k,m,a)=>{a.r(m),a.d(m,{DashboardModule:()=>R});var p=a(7013),P=a(2145),x=a(5503),M=a(7634),b=a(6632),Z=a(9978),e=a(8256),c=a(9912),f=a(4914),g=a(6895),T=a(5373),F=a(1029),S=a(5861),C=a(6448),A=a(810),v=a(3805),N=a(89),w=a(7752);function y(o,i){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.message)}}function B(o,i){1&o&&(e.TgZ(0,"h2"),e._uU(1,"ARCHIVE"),e.qZA())}const D=function(o){return{background:o}};let Y=(()=>{class o{constructor(t,n,r,d,s){this.route=t,this.store=n,this.dashboardService=r,this.boardService=d,this.ref=s,this.message="",this.selectedColor=JSON.parse(localStorage.getItem("selectedColor"))}ngOnInit(){}onEdit(){this.route.navigate(["/dashboard/edit-dashboard",this.dashboard.id],{skipLocationChange:!1})}onOpenBoard(){this.route.navigate(["/board",this.dashboard.id],{skipLocationChange:!1})}deleteDashboardStore(t){this.store.dispatch((0,C.iM)({id:t}))}getBoardsByDashboardId(){let t=[];return this.store.select(v.gx,{id:this.dashboard.id}).subscribe(n=>{t=n}),t}deleteBoards(t){var n=this;t.forEach(function(){var r=(0,S.Z)(function*(d){yield n.boardService.removeBoard(d.id),yield n.store.dispatch((0,A.L1)({id:d.id})),yield n.store.dispatch((0,N.YF)({id:n.dashboard.id}))});return function(d){return r.apply(this,arguments)}}())}deleteDashboardService(){this.dashboardService.removeDashboard(this.dashboard.id).subscribe(t=>{this.store.dispatch((0,C.iM)({id:this.dashboard.id}))})}onDelete(){this.deleteDashboardService();const t=this.getBoardsByDashboardId();t.length&&this.deleteBoards(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.F0),e.Y36(c.yh),e.Y36(f.s),e.Y36(w.$),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-dash-card"]],inputs:{dashboard:"dashboard",selectedColor:"selectedColor"},decls:23,vars:14,consts:[[1,"wrapper--dashboard"],[4,"ngIf"],[1,"name"],[1,"description"],[1,"date"],[1,"cl--more",3,"click"],[1,"control"],[1,"rectangles"],[1,"wrapper--popup"],["id","edit_id",3,"click"],["id","delete_id",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,y,2,1,"p",1),e.TgZ(2,"h2",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._uU(5),e.qZA(),e.TgZ(6,"div",3),e._uU(7),e.qZA(),e.TgZ(8,"div",4),e._uU(9),e.qZA(),e.TgZ(10,"div",5),e.NdJ("click",function(){return n.onOpenBoard()}),e._uU(11,"More..."),e.YNc(12,B,2,0,"h2",1),e.qZA(),e.TgZ(13,"div",6),e._UZ(14,"div",7)(15,"div",7)(16,"div",7),e.TgZ(17,"div",8)(18,"ul")(19,"li",9),e.NdJ("click",function(){return n.onEdit()}),e._uU(20,"edit"),e.qZA(),e.TgZ(21,"li",10),e.NdJ("click",function(){return n.onDelete()}),e._uU(22,"remove"),e.qZA()()()()()),2&t&&(e.Akn(e.VKq(10,D,n.selectedColor[1])),e.xp6(1),e.Q6J("ngIf",null!==n.message),e.xp6(2),e.Oqu(n.dashboard.title),e.xp6(2),e.Oqu(n.dashboard.id),e.xp6(2),e.Oqu(n.dashboard.description),e.xp6(2),e.Oqu(n.dashboard.date),e.xp6(3),e.Q6J("ngIf",n.dashboard.archive),e.xp6(5),e.Akn(e.VKq(12,D,n.selectedColor[0])))},dependencies:[g.O5],styles:[".wrapper--dashboard[_ngcontent-%COMP%]{width:240px;height:185px;position:relative;padding:25px 20px;background:#D9D9D9;cursor:pointer}.wrapper--dashboard[_ngcontent-%COMP%]   .cl--more[_ngcontent-%COMP%]{margin-top:15px;font-weight:900;cursor:pointer}.wrapper--dashboard[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;display:flex;flex-direction:column}.wrapper--dashboard[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .rectangles[_ngcontent-%COMP%]{width:10px;height:10px;margin-top:5px;border-radius:50%;background:#b9b0b0}.wrapper--dashboard[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .wrapper--popup[_ngcontent-%COMP%]{position:absolute;display:none;top:5px;right:5px;background:#B9B0B0;text-align:left;border-radius:5px}.wrapper--dashboard[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .wrapper--popup[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:5px 10px;margin:0}.wrapper--dashboard[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .wrapper--popup[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;text-decoration:none}.wrapper--dashboard[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]:hover   div.wrapper--popup[_ngcontent-%COMP%]{cursor:pointer;display:block}"],changeDetection:0}),o})(),J=(()=>{class o{constructor(t){this.store=t}transform(t,n){if(""===n)return t;let r=".?"+n.toLowerCase()+".?",d=new RegExp(r),s=t.filter(l=>l.title.toLowerCase().match(d));return this.store.select(v.DC).subscribe(l=>{let h=l.filter(u=>u.title.toLowerCase().match(n));h.length&&h.forEach(u=>{this.store.select(b.l1,{id:u.dashboardId}).subscribe(V=>{s.push(V)})})}),s.filter((l,h)=>h===s.indexOf(l))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.yh,16))},o.\u0275pipe=e.Yjl({name:"filterDashboard",type:o,pure:!0}),o})(),U=(()=>{class o{transform(t,n,r){if((!t||t)&&!n&&!r)return t;let d=[];return"progress"===r&&(d=t.filter(s=>"boolean"==typeof s[r]).sort((s,l)=>s[r]!==l[r]?0:1)),"done"===r&&(d=t.filter(s=>"boolean"==typeof s[r]).sort((s,l)=>s[r]===l[r]?0:1)),d=t.filter(s=>"string"==typeof s[r]||"number").sort((s,l)=>s[r]<l[r]?-1:s[r]>l[r]?1:0),"date"===r&&(d=t.filter(s=>"string"==typeof s[r]).sort((s,l)=>Number(s[r])-Number(l[r]))),"asc"===n?d:d.reverse()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"sortDashboard",type:o,pure:!0}),o})();function I(o,i){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-dash-card",6),e.qZA()),2&o){const t=i.$implicit,n=e.oxw();e.xp6(1),e.Q6J("dashboard",t)("selectedColor",n.selectedColor)}}const O=function(o){return{background:o}},L=function(o){return{padding:"45px 78px",fontSize:"64px",lineHeight:"77.45px",background:o,border:"none",borderRadius:"23px"}},E=[{path:"",component:(()=>{class o{constructor(t,n,r,d){this.store=t,this.router=n,this.dashboardService=r,this.ref=d,this.selectedColor=JSON.parse(localStorage.getItem("selectedColor")),this.filter="",this.sortName="",this.fieldName="",this.selectedColor=JSON.parse(localStorage.getItem("selectedColor"))}changeStrFilter(t){return this.filter=t}changeSortName(t){return this.sortName=t}changeFieldName(t){return this.fieldName=t}updatePage(){this.ref.markForCheck()}ngOnInit(){this.store.select(Z.L).subscribe(t=>{this.selectedColor=t,this.ref.markForCheck()}),this.dashboards=this.store.select(b.YK)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.yh),e.Y36(p.F0),e.Y36(f.s),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-dashboard"]],decls:11,vars:21,consts:[[3,"changeFilter","changeSORT","changeField"],[1,"wrapper-main"],[1,"wrapper-dashboards"],[3,"styles","updatePage"],[1,"text--inside"],[4,"ngFor","ngForOf"],[3,"dashboard","selectedColor"]],template:function(t,n){1&t&&(e.TgZ(0,"app-top-menu",0),e.NdJ("changeFilter",function(d){return n.changeStrFilter(d)})("changeSORT",function(d){return n.changeSortName(d)})("changeField",function(d){return n.changeFieldName(d)}),e.qZA(),e.TgZ(1,"div",1)(2,"div",2)(3,"app-button",3),e.NdJ("updatePage",function(){return n.updatePage()}),e.TgZ(4,"div",4),e._uU(5,"Add new"),e.qZA()(),e.YNc(6,I,2,2,"div",5),e.ALo(7,"sortDashboard"),e.ALo(8,"filterDashboard"),e.ALo(9,"async"),e._UZ(10,"router-outlet"),e.qZA()()),2&t&&(e.xp6(1),e.Akn(e.VKq(15,O,n.selectedColor[2])),e.xp6(1),e.Akn(e.VKq(17,O,n.selectedColor[2])),e.xp6(1),e.Q6J("styles",e.VKq(19,L,n.selectedColor[1])),e.xp6(3),e.Q6J("ngForOf",e.Dn7(7,6,e.xi3(8,10,e.lcZ(9,13,n.dashboards),n.filter),n.sortName,n.fieldName)))},dependencies:[g.sg,p.lC,T.z,F.r,Y,g.Ov,J,U],styles:[".wrapper-main[_ngcontent-%COMP%]{width:100%;min-height:100vh}.wrapper-main[_ngcontent-%COMP%]   .wrapper-dashboards[_ngcontent-%COMP%]{position:relative;width:1250px;display:grid;grid-template-columns:repeat(4,1fr);justify-content:space-between;align-items:center;gap:40px;flex-wrap:wrap;padding:25px}.text--inside[_ngcontent-%COMP%]{padding:0;margin:0;line-height:1;text-align:center;font-size:16px}"],changeDetection:0}),o})(),children:[{path:"add-dashboard",loadChildren:()=>a.e(3).then(a.bind(a,9003)).then(o=>o.AddDashboardModule)},{path:"edit-dashboard/:id",loadChildren:()=>a.e(103).then(a.bind(a,7103)).then(o=>o.EditDashboardModule)}]}];let R=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(E),P.h,x.D,M.i,p.Bz]}),o})()}}]);