"use strict";(self.webpackChunkhw_angular=self.webpackChunkhw_angular||[]).push([[585],{4585:(C,c,i)=>{i.r(c),i.d(c,{EditBoardModule:()=>A});var l=i(7013),e=i(433),p=i(810),u=i(3805),m=i(262),g=i(2843),a=i(4004),t=i(8256),s=i(7752),f=i(9912),v=i(6895),B=i(5085);function _(o,d){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.Oqu(r.message.message)}}function Z(o,d){1&o&&(t.TgZ(0,"div"),t._uU(1," Login is required. "),t.qZA())}function b(o,d){1&o&&(t.TgZ(0,"div"),t._uU(1," Login must be at least 4 characters long. "),t.qZA())}function T(o,d){if(1&o&&(t.TgZ(0,"div",16),t.YNc(1,Z,2,0,"div",1),t.YNc(2,b,2,0,"div",1),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",null==r.formBoard.controls.title.errors?null:r.formBoard.controls.title.errors.required),t.xp6(1),t.Q6J("ngIf",null==r.formBoard.controls.title.errors?null:r.formBoard.controls.title.errors.minlength)}}function x(o,d){1&o&&(t.TgZ(0,"div"),t._uU(1," Login is required. "),t.qZA())}function M(o,d){1&o&&(t.TgZ(0,"div"),t._uU(1," Login must be at least 4 characters long. "),t.qZA())}function E(o,d){if(1&o&&(t.TgZ(0,"div",16),t.YNc(1,x,2,0,"div",1),t.YNc(2,M,2,0,"div",1),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",null==r.formBoard.controls.description.errors?null:r.formBoard.controls.description.errors.required),t.xp6(1),t.Q6J("ngIf",null==r.formBoard.controls.description.errors?null:r.formBoard.controls.description.errors.minlength)}}const I=function(o){return{background:o}},O=function(o){return["/board/",o]},y=[{path:"",component:(()=>{class o{constructor(r,n,h,w,U){this.boardService=r,this.store=n,this.ref=h,this.route=w,this.routeAct=U,this.message=null,this.selectedColor=null,this.formBoard=new e.cw({title:new e.NI("",[e.kI.required,e.kI.minLength(5)]),description:new e.NI("",[e.kI.required,e.kI.minLength(5)]),status:new e.NI("",e.kI.required)}),this.dashboardId=+this.route.url.split("/")[2],this.id=+this.route.url.split("/")[4]}ngOnInit(){localStorage.getItem("selectedColor")&&(this.selectedColor=JSON.parse(localStorage.getItem("selectedColor"))),this.store.select(u.WU,{id:Number(this.id)}).subscribe(r=>{if(void 0!==r){const n=!0===r.status.todo?"todo":!0===r.status.progress?"progress":"done";this.formBoard.controls.title.setValue(r.title),this.formBoard.controls.description.setValue(r.description),this.formBoard.controls.status.setValue(n)}})}changeBoard(){const r=this.formBoard.controls.status.value;return{id:this.id,title:this.formBoard.controls.title.value,description:this.formBoard.controls.description.value,dashboardId:Number(this.dashboardId),date:(new Date).toLocaleDateString(),status:{todo:"todo"===r,progress:"progress"===r,done:"done"===r}}}onSubmit(){const r=this.changeBoard();this.boardService.editBoard(r).pipe((0,m.K)(n=>(0,g._)("Error 400!")),(0,a.U)(n=>n)).subscribe(n=>{void 0!==n&&(this.store.dispatch((0,p.Vq)(r)),this.route.navigate(["/board",this.dashboardId]))})}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(s.$),t.Y36(f.yh),t.Y36(t.sBO),t.Y36(l.F0),t.Y36(l.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-board-card-edit"]],decls:35,vars:12,consts:[[1,"form-wrapper",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"top--wrapper"],[3,"routerLink"],[1,"input-wrapper"],["for","title"],["id","title_id","type","text","formControlName","title"],["class","invalid",4,"ngIf"],["for","description"],["id","description_id","type","description","formControlName","description"],[1,"radio-wrapper"],["for","status"],["type","radio","value","todo","formControlName","status"],["type","radio","value","progress","formControlName","status"],["type","radio","value","done","formControlName","status"],["type","submit",3,"disabled"],[1,"invalid"]],template:function(r,n){1&r&&(t.TgZ(0,"app-modal")(1,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.YNc(2,_,2,1,"p",1),t.TgZ(3,"div",2)(4,"h1"),t._uU(5,"Edit board"),t.qZA(),t.TgZ(6,"a",3),t._uU(7,"\u2716"),t.qZA()(),t.TgZ(8,"div",4)(9,"label",5),t._uU(10,"Title board: "),t.qZA(),t._UZ(11,"input",6),t.YNc(12,T,3,2,"div",7),t.qZA(),t.TgZ(13,"div",4)(14,"label",8),t._uU(15,"Description: "),t.qZA(),t._UZ(16,"input",9),t.YNc(17,E,3,2,"div",7),t.qZA(),t.TgZ(18,"div",10)(19,"label",11),t._uU(20,"Status : "),t.qZA(),t.TgZ(21,"label"),t._UZ(22,"input",12),t.TgZ(23,"span"),t._uU(24,"todo"),t.qZA()(),t.TgZ(25,"label"),t._UZ(26,"input",13),t.TgZ(27,"span"),t._uU(28,"progress"),t.qZA()(),t.TgZ(29,"label"),t._UZ(30,"input",14),t.TgZ(31,"span"),t._uU(32,"done"),t.qZA()()(),t.TgZ(33,"button",15),t._uU(34,"Submit"),t.qZA()()()),2&r&&(t.xp6(1),t.Akn(t.VKq(8,I,n.selectedColor[1])),t.Q6J("formGroup",n.formBoard),t.xp6(1),t.Q6J("ngIf",null!==n.message),t.xp6(4),t.Q6J("routerLink",t.VKq(10,O,n.dashboardId)),t.xp6(6),t.Q6J("ngIf",n.formBoard.controls.title.invalid&&(n.formBoard.controls.title.dirty||n.formBoard.controls.title.touched)),t.xp6(5),t.Q6J("ngIf",n.formBoard.controls.description.invalid&&(n.formBoard.controls.description.dirty||n.formBoard.controls.description.touched)),t.xp6(16),t.Q6J("disabled",!n.formBoard.valid))},dependencies:[v.O5,e._Y,e.Fj,e._,e.JJ,e.JL,e.sg,e.u,l.yS,B.z],styles:[".form-wrapper[_ngcontent-%COMP%]{padding:75px;width:600px;display:flex;flex-direction:column;align-items:center;margin:0 auto;background:#D9D9D9;border-radius:10px}.form-wrapper[_ngcontent-%COMP%]   .top--wrapper[_ngcontent-%COMP%]{display:flex;width:250px;justify-content:space-between;align-items:center;cursor:pointer}.form-wrapper[_ngcontent-%COMP%]   .top--wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:underline}.form-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:250px;margin-bottom:15px}.form-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:50px;width:150px}.valid[_ngcontent-%COMP%]{color:green;border:1px solid green}.invalid[_ngcontent-%COMP%]{color:red;border:1px solid red}"],changeDetection:0}),o})()}];let A=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.Bz.forChild(y),l.Bz]}),o})()},5085:(C,c,i)=>{i.d(c,{z:()=>g});var l=i(9978),e=i(8256),p=i(9912);const u=function(a){return{background:a,opacity:.9}},m=["*"];let g=(()=>{class a{constructor(s){this.store=s,this.selectedColor=JSON.parse(localStorage.getItem("selectedColor"))}ngOnInit(){this.store.select(l.L).subscribe(s=>{this.selectedColor=s})}}return a.\u0275fac=function(s){return new(s||a)(e.Y36(p.yh))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-modal"]],inputs:{selectedColor:"selectedColor"},ngContentSelectors:m,decls:2,vars:4,consts:[[1,"wrapper-modal"]],template:function(s,f){1&s&&(e.F$t(),e.TgZ(0,"div",0),e.Hsn(1),e.qZA()),2&s&&e.Akn(e.VKq(2,u,f.selectedColor[2]))},styles:[".wrapper-modal[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;background:rgba(0,0,0,.4);display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),a})()}}]);