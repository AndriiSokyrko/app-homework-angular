"use strict";(self.webpackChunkhw_angular=self.webpackChunkhw_angular||[]).push([[309],{4309:(P,c,e)=>{e.r(c),e.d(c,{LoginModule:()=>I});var a=e(7013),d=e(5861),i=e(433),m=e(9978),u=e(484),f=e(1133),o=e(8256),h=e(1228),v=e(9912),L=e(6895),w=e(5085);function C(r,s){if(1&r&&(o.TgZ(0,"p"),o._uU(1),o.qZA()),2&r){const n=o.oxw();o.xp6(1),o.Oqu(n.showMessage)}}function x(r,s){1&r&&(o.TgZ(0,"div"),o._uU(1," Login is required. "),o.qZA())}function Z(r,s){1&r&&(o.TgZ(0,"div"),o._uU(1," Login must be at least 4 characters long. "),o.qZA())}function T(r,s){if(1&r&&(o.TgZ(0,"div",11),o.YNc(1,x,2,0,"div",1),o.YNc(2,Z,2,0,"div",1),o.qZA()),2&r){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",null==n.formLogin.controls.login.errors?null:n.formLogin.controls.login.errors.required),o.xp6(1),o.Q6J("ngIf",null==n.formLogin.controls.login.errors?null:n.formLogin.controls.login.errors.minlength)}}function M(r,s){1&r&&(o.TgZ(0,"div"),o._uU(1," Login is required. "),o.qZA())}function _(r,s){1&r&&(o.TgZ(0,"div"),o._uU(1," Password must be at least 4 chars. "),o.qZA())}function y(r,s){if(1&r&&(o.TgZ(0,"div",11),o.YNc(1,M,2,0,"div",1),o.YNc(2,_,2,0,"div",1),o.qZA()),2&r){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",null==n.formLogin.controls.password.errors?null:n.formLogin.controls.password.errors.required),o.xp6(1),o.Q6J("ngIf",null==n.formLogin.controls.password.errors?null:n.formLogin.controls.password.errors.minlength)}}const O=function(r){return{background:r}},b=[{path:"",component:(()=>{class r{constructor(n,t,l,g){this.authService=n,this.router=t,this.ref=l,this.store=g,this.selectedColor=JSON.parse(localStorage.getItem("selectedColor")),this.showMessage="",this.formLogin=new i.cw({login:new i.NI("",[i.kI.required,i.kI.minLength(5)]),password:new i.NI("",[i.kI.required,i.kI.minLength(5)])})}ngOnInit(){this.store.select(m.L).subscribe(n=>{this.selectedColor=n})}onSubmit(){var n=this;this.store.select(u.R).subscribe(function(){var t=(0,d.Z)(function*(l){const g=l.find(p=>p.name===n.formLogin.controls.login.value);return g?(yield f.compare(String(n.formLogin.controls.password.value),String(g.password)))?(localStorage.setItem("login",g.id.toString()),void n.router.navigate(["/dashboard"])):(n.showMessage="Password isn't correct",n.ref.markForCheck(),void setTimeout(()=>{n.showMessage="",n.ref.markForCheck()},1e3)):(n.showMessage="Login or password isn't correct",n.ref.markForCheck(),void setTimeout(()=>{n.showMessage="",n.ref.markForCheck()},1e3))});return function(l){return t.apply(this,arguments)}}())}}return r.\u0275fac=function(n){return new(n||r)(o.Y36(h.e),o.Y36(a.F0),o.Y36(o.sBO),o.Y36(v.yh))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-login"]],decls:20,vars:10,consts:[[1,"form-wrapper",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"top--wrapper"],[3,"routerLink"],[1,"input-wrapper"],["for","login"],["id","login_id","type","text","formControlName","login"],["class","invalid",4,"ngIf"],["for","password"],["id","password_id","type","password","formControlName","password"],["type","submit",3,"disabled"],[1,"invalid"]],template:function(n,t){1&n&&(o.TgZ(0,"app-modal")(1,"form",0),o.NdJ("ngSubmit",function(){return t.onSubmit()}),o.YNc(2,C,2,1,"p",1),o.TgZ(3,"div",2)(4,"h1"),o._uU(5,"Login"),o.qZA(),o.TgZ(6,"a",3),o._uU(7,"Registration"),o.qZA()(),o.TgZ(8,"div",4)(9,"label",5),o._uU(10,"Login name: "),o.qZA(),o._UZ(11,"input",6),o.YNc(12,T,3,2,"div",7),o.qZA(),o.TgZ(13,"div",4)(14,"label",8),o._uU(15,"Password: "),o.qZA(),o._UZ(16,"input",9),o.YNc(17,y,3,2,"div",7),o.qZA(),o.TgZ(18,"button",10),o._uU(19,"Submit"),o.qZA()()()),2&n&&(o.xp6(1),o.Akn(o.VKq(8,O,t.selectedColor[1])),o.Q6J("formGroup",t.formLogin),o.xp6(1),o.Q6J("ngIf",t.showMessage),o.xp6(4),o.Q6J("routerLink","/register"),o.xp6(6),o.Q6J("ngIf",t.formLogin.controls.login.invalid&&(t.formLogin.controls.login.dirty||t.formLogin.controls.login.touched)),o.xp6(5),o.Q6J("ngIf",t.formLogin.controls.password.invalid&&(t.formLogin.controls.password.dirty||t.formLogin.controls.password.touched)),o.xp6(1),o.Q6J("disabled",!t.formLogin.valid))},dependencies:[L.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,a.yS,w.z],styles:[".form-wrapper[_ngcontent-%COMP%]{padding:75px;width:600px;display:flex;flex-direction:column;align-items:center;margin:0 auto;background:#D9D9D9;border-radius:10px}.form-wrapper[_ngcontent-%COMP%]   .top--wrapper[_ngcontent-%COMP%]{display:flex;width:250px;justify-content:space-between;align-items:center;cursor:pointer}.form-wrapper[_ngcontent-%COMP%]   .top--wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:underline}.form-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-wrapper[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:250px;margin-bottom:15px}.form-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:50px;width:150px}.valid[_ngcontent-%COMP%]{color:green;border:1px solid green}.invalid[_ngcontent-%COMP%]{color:red;border:1px solid red}"],changeDetection:0}),r})()}];let I=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[a.Bz.forChild(b),a.Bz]}),r})()}}]);