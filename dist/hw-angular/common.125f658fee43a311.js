"use strict";(self.webpackChunkhw_angular=self.webpackChunkhw_angular||[]).push([[592],{1029:(D,m,e)=>{e.d(m,{r:()=>b});var t=e(8256),c=e(810),h=e(6632),l=e(6448),p=e(3805),a=e(7013),o=e(9912),d=e(7752),g=e(4914),v=e(6895);const u=["*"];let b=(()=>{class f{constructor(s,r,i,n,_){this.route=s,this.routeAct=r,this.store=i,this.boardService=n,this.dashboardService=_,this.name="",this.statusName="",this.url="add-dashboard",this.updatePage=new t.vpe,this.archiveChange=new t.vpe,this.id=""}ngOnInit(){this.id=this.routeAct.snapshot.params.id}onClick(){const s=void 0===this.id?"":this.id,r=this.url.split("-");this.updatePage.emit(),this.route.navigate([r[1]+"/"+s+"/"+this.url])}onDragOver(s){s.preventDefault()}onDrop(s){const r=JSON.parse(s.dataTransfer.getData("board")),i={...r,status:{todo:!1,progress:!1,done:!1}};i.status[this.statusName]=!0;const n={id:r.dashboardId,progress:!1,done:!1,archive:!1};n[this.statusName]=!0,this.dashboardService.patchDashboard(n).subscribe(_=>{this.store.dispatch((0,l.ri)(_))}),this.boardService.editBoard(i).subscribe(_=>{void 0!==_&&(this.store.dispatch((0,c.Vq)(_)),this.checkStatusName(i))})}checkStatusName(s){this.store.select(p.gx,{id:s.dashboardId}).subscribe(r=>{let i=r.reduce((n,_)=>!1!==_.status.done&&n,!0);this.store.select(h.l1,{id:s.dashboardId}).subscribe(n=>{this.archiveChange.emit(i?{archive:!0}:{archive:!1})})})}}return f.\u0275fac=function(s){return new(s||f)(t.Y36(a.F0),t.Y36(a.gz),t.Y36(o.yh),t.Y36(d.$),t.Y36(g.s))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-button"]],inputs:{name:"name",statusName:"statusName",styles:"styles",url:"url"},outputs:{updatePage:"updatePage",archiveChange:"archiveChange"},ngContentSelectors:u,decls:3,vars:1,consts:[[3,"ngStyle","click","dragover","drop"]],template:function(s,r){1&s&&(t.F$t(),t.TgZ(0,"button",0),t.NdJ("click",function(){return r.onClick()})("dragover",function(n){return r.onDragOver(n)})("drop",function(n){return r.onDrop(n)}),t._uU(1,"+\n"),t.Hsn(2),t.qZA()),2&s&&t.Q6J("ngStyle",r.styles)},dependencies:[v.PC],styles:["*[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0}),f})()},3805:(D,m,e)=>{e.d(m,{DC:()=>h,WU:()=>l,gx:()=>p});var t=e(9912);const c=(0,t.ZF)("board"),h=(0,t.P1)(c,a=>a),l=(0,t.P1)(c,(a,o)=>a.find(d=>d.id===o.id)),p=(0,t.P1)(c,(a,o)=>a.filter(d=>d.dashboardId===o.id))},5861:(D,m,e)=>{function t(h,l,p,a,o,d,g){try{var v=h[d](g),u=v.value}catch(b){return void p(b)}v.done?l(u):Promise.resolve(u).then(a,o)}function c(h){return function(){var l=this,p=arguments;return new Promise(function(a,o){var d=h.apply(l,p);function g(u){t(d,a,o,g,v,"next",u)}function v(u){t(d,a,o,g,v,"throw",u)}g(void 0)})}}e.d(m,{Z:()=>c})}}]);